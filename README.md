NewsAPI
-----------------------------------------
## Запуск проекта
1. Создайте в корне проекта файл ```.env``` и заполните данные по образцу из файла ```.env.sample```

2. Создайте виртуальное окружение ```venv```:
   ```shell
   python3 -m venv venv
   ```

3. Установите все необходимые зависимости, указанные в файле ```requirements.txt```:
   ```shell
   pip install -r requirements.txt
   ```

4. Произведите миграции базы данных командами:
   ```shell
   python3 manage.py makemigration
   ```
   ```shell
   python3 manage.py migrate
   ```
   
5. Для работы с админкой необходимо создать суперпользователя командой:
   ```shell
   python3 manage.py csu
   ```

6. Запустите сервер командой
   ```shell
   python3 manage.py runserver
   ```

7. Запустите Celery командой:
   ```shell
   celery -A config worker -l INFO
   ```
   
7. Для тестирования сервиса рекомендуется использовать ```Postman```


8. Для использования Docker необходимо создать контейнер командой:
   ```shell
   docker-compose build
   ```
   Запустить контейнер командой:
   ```shell
   docker-compose up
   ```
________________________________________
## Эндпоинты (Endpoints)

### Получение списка новостей

URL: /news/list/

Метод: ```GET```

Ответ:

{
    "Success": true,
    "News": [
      {
        "Id": 64,
        "Title": "Lorem ipsum",
        "Content": "Dolor sit amet <b>foo</b>",
        "Categories": [1,2,3]
      },
      {
        "Id": 1,
        "Title": "first",
        "Content": "tratata",
        "Categories": [1]
      }
    ]
}
________________________________________________
### Изменение новостей

URL: /news/edit/<news_id>/

Метод ```PATCH```

Пример запроса:

{
    "Title": "Новый заголовок"
}

Ответ:

{
    "Id": 64,
    "Title": "Новый заголовок",
    "Content": "Dolor sit amet <b>foo</b>",
    "Categories": [1,2,3]
}
________________________________________________
### Регистрация пользователя

URL: /sign-up/

Метод: ```POST```

Пример запроса:

{
    "name": "......",
    "phone": "......",
    "email": "......",
    "site": "......"
}

Ответ:
- Через ```Celery``` реализован функционал генерации и отправки пароля для личного кабинета на почту.
________________________________________________________________________
### Авторизация пользователя

URL: /sign-up/

Метод: ```POST```

Пример запроса:

{
    "email": "......",
    "password": "......" - (отправленный на почту)
}

Ответ:

{
    "JWT Token": "......"
}
________________________________________________________
### Запрос на смену пароля

URL: /recovery/

Метод: ```POST```

Пример запроса:

{
    "email": "......"
}

Ответ:
- Получаем сообщение на почту с ссылкой на смену пароля
____________________________________________________________________
### Смена пароля

URL: /recovery/:hash/ - (ссылка отправленная на почту)

Метод: ```PATCH```

Пример запроса:

{
    "password": "......"
}  

Ответ:

{
    "JWT Token": "......" - (обновленный)
}
